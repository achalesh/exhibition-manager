<%- include('partials/header') %>

<div class="container-fluid mt-4">
    <%- include('partials/ticketingSubNav') %>

    <h1 class="h3 mb-3"><%= title %></h1>

    <!-- Summary Cards -->
    <div class="row">
        <div class="col-md-3">
            <div class="card text-white bg-primary mb-3">
                <div class="card-header">Total Tickets Sold</div>
                <div class="card-body">
                    <h4 class="card-title"><%= (summary.total_tickets_sold || 0).toLocaleString() %></h4>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-white bg-success mb-3">
                <div class="card-header">Total Revenue</div>
                <div class="card-body">
                    <h4 class="card-title">₹<%= (summary.total_revenue || 0).toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) %></h4>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card mb-3">
                <div class="card-header">Stock Status</div>
                <div class="card-body d-flex justify-content-around">
                    <div class="text-center">
                        <h5><%= (stockCounts.Available || 0).toLocaleString() %></h5>
                        <p class="text-muted mb-0">Available</p>
                    </div>
                    <div class="text-center">
                        <h5><%= (stockCounts.Distributed || 0).toLocaleString() %></h5>
                        <p class="text-muted mb-0">Distributed</p>
                    </div>
                    <div class="text-center">
                        <h5><%= (stockCounts.Settled || 0).toLocaleString() %></h5>
                        <p class="text-muted mb-0">Settled</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Top Performers -->
    <div class="row">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">Top 5 Rides by Revenue</div>
                <ul class="list-group list-group-flush">
                    <% topRides.forEach(ride => { %>
                        <li class="list-group-item d-flex justify-content-between"><span><%= ride.ride_name %></span> <strong>₹<%= ride.total_revenue.toLocaleString('en-IN') %></strong></li>
                    <% }) %>
                </ul>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">Top 5 Staff by Revenue</div>
                <ul class="list-group list-group-flush">
                    <% topStaff.forEach(staff => { %>
                        <li class="list-group-item d-flex justify-content-between"><span><%= staff.staff_name %></span> <strong>₹<%= staff.total_revenue.toLocaleString('en-IN') %></strong></li>
                    <% }) %>
                </ul>
            </div>
        </div>
    </div>
</div>

<%- include('partials/footer') %>