<%- include('partials/header') %>

<div class="container mt-4">
    <%- include('partials/ticketingNav') %>

    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1><%= title %></h1>
    </div>

    <!-- Summary Cards -->
    <div class="row mb-4">
        <div class="col-md-3">
            <div class="card text-white bg-primary h-100">
                <div class="card-body">
                    <h5 class="card-title">Total Revenue</h5>
                    <p class="card-text fs-4 fw-bold">₹<%= (summary.total_revenue || 0).toLocaleString('en-IN') %></p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-white bg-success h-100">
                <div class="card-body">
                    <h5 class="card-title">Tickets Sold</h5>
                    <p class="card-text fs-4 fw-bold"><%= (summary.total_tickets_sold || 0).toLocaleString('en-IN') %></p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-dark bg-warning h-100">
                <div class="card-body">
                    <h5 class="card-title">Distributed Stock</h5>
                    <p class="card-text fs-4 fw-bold"><%= (stockCounts.Distributed || 0).toLocaleString('en-IN') %> <small>books</small></p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-dark bg-light h-100">
                <div class="card-body">
                    <h5 class="card-title">Available Stock</h5>
                    <p class="card-text fs-4 fw-bold"><%= (stockCounts.Available || 0).toLocaleString('en-IN') %> <small>books</small></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Top Performers -->
    <div class="row">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h5>Top 5 Rides by Revenue</h5>
                </div>
                <div class="card-body">
                    <ul class="list-group list-group-flush">
                        <% topRides.forEach(ride => { %>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                <%= ride.ride_name %>
                                <span class="badge bg-primary rounded-pill">₹<%= ride.total_revenue.toLocaleString('en-IN') %></span>
                            </li>
                        <% }) %>
                    </ul>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h5>Top 5 Staff by Revenue</h5>
                </div>
                <div class="card-body">
                    <ul class="list-group list-group-flush">
                        <% topStaff.forEach(staff => { %>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                <%= staff.staff_name %>
                                <span class="badge bg-success rounded-pill">₹<%= staff.total_revenue.toLocaleString('en-IN') %></span>
                            </li>
                        <% }) %>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<%- include('partials/footer') %>