<%- include('partials/header') %>

<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <div class="card shadow-sm">
        <div class="card-header bg-primary text-white">
          <h4 class="mb-0"><%= title %></h4>
        </div>
        <div class="card-body">
          <form action="/material/edit/<%= issue.id %>" method="POST">
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="client_id" class="form-label">Client / Exhibitor</label>
                <select id="client_id" name="client_id" class="form-select" required>
                  <% clients.forEach(client => { %>
                    <option value="<%= client.client_id %>" <%= issue.client_id == client.client_id ? 'selected' : '' %>>
                      <%= client.client_name %> (<%= client.space_name %>)
                    </option>
                  <% }) %>
                </select>
              </div>
              <div class="col-md-6 mb-3">
                <label for="issue_date" class="form-label">Issue Date</label>
                <input type="date" class="form-control" id="issue_date" name="issue_date" value="<%= new Date(issue.issue_date).toISOString().split('T')[0] %>" required>
              </div>
            </div>

            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="sl_no" class="form-label">Serial Number</label>
                <input type="text" class="form-control" id="sl_no" name="sl_no" value="<%= issue.sl_no || '' %>">
              </div>
              <div class="col-md-6 mb-3">
                <label for="stall_number" class="form-label">Stall Number</label>
                <input type="text" class="form-control" id="stall_number" name="stall_number" value="<%= issue.stall_number || '' %>">
              </div>
            </div>

            <hr>
            <h5 class="mb-3">Items Issued</h5>

            <div class="row">
              <div class="col-md-6">
                <h6>Free Items</h6>
                <div class="input-group mb-2">
                  <span class="input-group-text" style="width: 80px;">Plywood</span>
                  <input type="number" class="form-control" name="plywood_free" value="<%= issue.plywood_free || 0 %>">
                </div>
                <div class="input-group mb-2">
                  <span class="input-group-text" style="width: 80px;">Table</span>
                  <input type="number" class="form-control" name="table_free" value="<%= issue.table_free || 0 %>">
                </div>
                <div class="input-group mb-2">
                  <span class="input-group-text" style="width: 80px;">Chair</span>
                  <input type="number" class="form-control" name="chair_free" value="<%= issue.chair_free || 0 %>">
                </div>
                <div class="input-group mb-2">
                  <span class="input-group-text" style="width: 80px;">Rod</span>
                  <input type="number" class="form-control" name="rod_free" value="<%= issue.rod_free || 0 %>">
                </div>
              </div>
              <div class="col-md-6">
                <h6>Paid Items</h6>
                <div class="input-group mb-2">
                  <span class="input-group-text" style="width: 80px;">Plywood</span>
                  <input type="number" class="form-control" name="plywood_paid" value="<%= issue.plywood_paid || 0 %>">
                </div>
                <div class="input-group mb-2">
                  <span class="input-group-text" style="width: 80px;">Table</span>
                  <input type="number" class="form-control" name="table_paid" value="<%= issue.table_paid || 0 %>">
                </div>
                <div class="input-group mb-2">
                  <span class="input-group-text" style="width: 80px;">Chair</span>
                  <input type="number" class="form-control" name="chair_paid" value="<%= issue.chair_paid || 0 %>">
                </div>
              </div>
            </div>

            <hr>

            <div class="mb-3">
              <label for="table_numbers" class="form-label">Table Numbers</label>
              <input type="text" class="form-control" id="table_numbers" name="table_numbers" value="<%= issue.table_numbers || '' %>">
            </div>
            <div class="mb-3">
              <label for="chair_numbers" class="form-label">Chair Numbers</label>
              <input type="text" class="form-control" id="chair_numbers" name="chair_numbers" value="<%= issue.chair_numbers || '' %>">
            </div>

            <hr>

            <div class="row">
              <div class="col-md-4 mb-3">
                <label for="total_payable" class="form-label">Total Payable (â‚¹)</label>
                <input type="number" class="form-control" id="total_payable" name="total_payable" value="<%= issue.total_payable || 0 %>">
              </div>
            </div>

            <div class="mb-3">
              <label for="notes" class="form-label">Notes</label>
              <textarea class="form-control" id="notes" name="notes" rows="3"><%= issue.notes || '' %></textarea>
            </div>

            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
              <a href="/booking/details-full/<%= issue.booking_id %>" class="btn btn-secondary">Cancel</a>
              <button type="submit" class="btn btn-primary">Save Changes</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<%- include('partials/footer') %>