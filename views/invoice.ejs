<%- include('partials/header') %>

<style>
  @media print {
    @page {
      size: A4;
      margin: 1.5cm;
    }
    body {
      background-color: #fff;
      margin: 0;
    }
    .no-print {
      display: none;
    }
    .card {
      border: none;
      box-shadow: none;
    }
    .invoice-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      border-bottom: 2px solid #dee2e6;
      padding-bottom: 1rem;
      margin-bottom: 2rem;
    }
    .invoice-header img {
      max-height: 80px;
      max-width: 200px;
    }
  }
</style>

<div class="card">
  <div class="card-header">
    <div class="invoice-header">
      <div>
        <% if (viewingSession.logo_path) { %>
          <img src="<%= viewingSession.logo_path %>" alt="Logo" class="mb-2">
        <% } %>
        <h4 class="mb-1"><%= viewingSession.name %></h4>
        <p class="text-muted mb-0"><%= viewingSession.address %>, <%= viewingSession.location %></p>
      </div>
      <div class="text-end">
        <h2 class="mb-1">Invoice</h2>
        <p class="mb-0"><strong>Invoice No:</strong> #<%= booking.id %></p>
        <p class="mb-0"><strong>Date:</strong> <%= new Date(booking.booking_date).toLocaleDateString() %></p>
      </div>
    </div>
  </div>
  <div class="card-body">
    <h5 class="card-title">Exhibitor Details</h5>
    <p><strong>Name:</strong> <%= booking.client_name %></p>
    <p><strong>Contact:</strong> <%= booking.contact %></p>
    <hr>
    <h5 class="card-title">Space Details</h5>
    <p><strong>Space:</strong> <%= booking.space_name %> (<%= booking.space_type %>)</p>
    <p><strong>Facilities:</strong> <%= booking.facilities || 'N/A' %></p>
    <hr>
    <h5 class="card-title">Billing Details</h5>
    <table class="table">
      <tr>
        <td>Base Rent:</td>
        <td class="text-end">₹<%= booking.rent_amount %></td>
      </tr>
      <tr>
        <td>Discount:</td>
        <td class="text-end">- ₹<%= booking.discount %></td>
      </tr>
      <tr class="fw-bold">
        <td>Total Amount:</td>
        <td class="text-end">₹<%= booking.total %></td>
      </tr>
    </table>
  </div>
  <div class="card-footer text-end no-print">
    <button class="btn btn-primary" onclick="window.print()"><i class="bi bi-printer me-1"></i>Print Invoice</button>
    <a href="/booking/list" class="btn btn-secondary">« Back to Bookings</a>
  </div>
</div>

<%- include('partials/footer') %>