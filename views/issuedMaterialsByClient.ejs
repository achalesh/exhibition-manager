<%- include('partials/header') %>

<div class="container-fluid">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="mb-0"><%= title %></h2>
    <div>
      <a href="/booking/details-full/<%= materials[0]?.booking_id || '' %>" class="btn btn-outline-secondary">Â« Back to Booking Details</a>
    </div>
  </div>

  <% if (materials && materials.length > 0) { %>
    <div class="card shadow-sm">
      <div class="card-header bg-light d-flex justify-content-between align-items-center">
        <span>A total of <%= materials.length %> items are currently issued.</span>
        <div>
          <form action="/materials/return-all/<%= client.id %>" method="POST" class="d-inline" onsubmit="return confirm('Are you sure you want to return ALL materials for this client?');">
            <button type="submit" class="btn btn-success"><i class="bi bi-check-all me-2"></i>Return All Materials</button>
          </form>
        </div>
      </div>
      <div class="card-body">
        <div class="table-responsive">
          <table class="table table-striped">
            <thead class="table-light">
              <tr>
                <th>Name</th>
                <th>Unique ID</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <% materials.forEach(material => { %>
                <tr>
                  <td><%= material.name %></td>
                  <td class="font-monospace"><%= material.unique_id %></td>
                  <td><%= material.description || 'N/A' %></td>
                </tr>
              <% }) %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  <% } else { %>
    <div class="alert alert-info" role="alert">
      No materials are currently issued to this client.
    </div>
  <% } %>
</div>

<%- include('partials/footer') %>